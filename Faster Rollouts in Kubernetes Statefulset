Kubernetes StatefulSet updates are slow

It is Well, sometimes.

Because it supports one-pod-at-a-time rolling updates.

Things get worse when the container takes more time to load.

To bring some happiness, An alpha feature in Kubernetes helps you speed things up.

In the StatefulSet definition file, under rollingUpdate spec you can now mention a new field — “maxUnavailable”



What does it do?

For example: If you set it to 2, Kubernetes will be able to update 2 Pods, instead of updating one at a time.

Make sure to enable the new “MaxUnavailableStatefulSet” feature flag to get this working.

Following is the perfect representation of the same.

Configuration from the official documentation:

#####################################################
apiVersion: apps/v1
kind: StatefulSet
metadata:
name: web
namespace: default
spec:
podManagementPolicy: OrderedReady
replicas: 5
selector:
matchLabels:
app: nginx
template:
metadata:
labels:
app: nginx
spec:
containers:
— image: registry-url/nginx-slim:0.8
imagePullPolicy: IfNotPresent
name: nginx
updateStrategy:
rollingUpdate:
maxUnavailable: 2
partition: 0
type: RollingUpdate
#####################################################

If this is useful, please follow me on GitHub
